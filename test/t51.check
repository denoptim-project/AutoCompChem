#!/bin/bash

grep -q "Found 'CHARGE' option" t51.log
if [ $? != 0 ] ; then
echo NOT Passed ERROR 1
exit -1
fi

grep -q -i "CHARGE[[:space:]]*0" nwchem51.nw
if [ $? != 0 ] ; then
echo NOT Passed ERROR 2
exit -1
fi

grep -q "Found 'SPIN_MULTIPLICITY' option" t51.log
if [ $? != 0 ] ; then
echo NOT Passed ERROR 3
exit -1
fi

n=$(echo $(wc -l nwchem51.nw | awk '{print $1}') - $(grep -n SCF nwchem51.nw | awk -F":" '{print $1}') | bc)
m=$(tail -n $n nwchem51.nw | grep -n -m1 END | awk -F":" '{print $1}')
tail -n $n nwchem51.nw | head -n $m | grep -i -q "NOPEN[[:space:]]*10"
if [ $? != 0 ] ; then
echo NOT Passed ERROR 4
exit -1
fi

grep -q -i "mult[[:space:]]*10" nwchem51.nw
if [ $? != 0 ] ; then
echo NOT Passed ERROR 5
exit -1
fi

grep -q "^[[:space:]]*H[[:space:]]*5.14.......[[:space:]]*-3.3.......[[:space:]]*-2.7.......[[:space:]]*$" nwchem51.nw
if [ $? != 0 ] ; then
echo NOT Passed ERROR 6
exit -1
fi

grep -q "^[[:space:]]*SET[[:space:]]*geometry\:actlist[[:space:]]*5:6[[:space:]]*8:63[[:space:]]*$" nwchem51.nw
if [ $? != 0 ] ; then
echo NOT Passed ERROR 7
exit -1
fi

grep -q 'Termination status: 0' t51.log
if [ $? == 0 ] ; then 
echo Passed
exit 0
else
echo NOT Passed ERROR 0
exit -1
fi
