#!/bin/bash

function not_passed() {
  echo "NOT Passed: check condition leading to line '$1' of '$0'"
  exit -1
}

if [ ! -f t165.log ] ; then not_passed $LINENO ; fi

n=0;n=$(grep -c -i 'Constraint .*Type=DIHEDRAL.*value=1\.2345' t165.log)
if [ $n != 2 ] ; then not_passed $LINENO ; fi

if grep -q 'Termination status: 0' t165.log ; then
  echo Passed
  exit 0
else
  echo NOT Passed 99
  exit -1
fi
