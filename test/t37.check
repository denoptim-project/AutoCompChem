#!/bin/bash

if [ ! -f t37sorted.sdf ]; then
  echo NOT Passed 1
  exit -1
fi

ref="0.70120116284270560.70234576106860250.70377909778422720.70683365601135050.70844745405834770.7085374286851150.70941141766300610.70944979554914980.71262106775611740.71262385855928470.71348187186205780.71370726025889570.71526811051129870.71539060013312990.71887930743399660.7325696926836470.73384120355374260.73742583710985730.74866564266159660.75013163352210920.75758360983425350.78245538631452080.7875861140358110.83355021905860380.84022157937746780.94917041158089220.98580802598435371.07633219863719721.08348502745217211.18969447389945731.49802869867630321.4980324204564202"
res=$(awk '/WorstOverlap/{getline; print}' t37sorted.sdf | tr -d "\n")
if [ "$res" != "$ref" ] ; then
  echo NOT Passed 2
  exit -1
fi

grep -q 'Termination status: 0' t37.log
if [ $? == 0 ] ; then 
  echo Passed
  exit 0
else
  echo NOT Passed 3
  exit -1
fi
