#!/bin/bash

function not_passed() {
  echo "NOT Passed: check condition leading to line '$1' of '$0'"
  exit -1
}

if [ ! -f "cli31.log" ] ; then not_passed $LINENO ; fi

if ! grep -q -i " varB=-2.5 " "cli31.log" ; then not_passed $LINENO ; fi
if ! grep -q -i " varB=-0.5 " "cli31.log" ; then not_passed $LINENO ; fi
if ! grep -q -i " varB=1.5 " "cli31.log" ; then not_passed $LINENO ; fi
if ! grep -q -i " varB=19.5 " "cli31.log" ; then not_passed $LINENO ; fi
if ! grep -q -i " varA=0.0 " "cli31.log" ; then not_passed $LINENO ; fi
if ! grep -q -i " varA=13.53 " "cli31.log" ; then not_passed $LINENO ; fi


n=0; n=$(grep -c -i "Initiating Shell Job" "cli31.log")
if [ 12 != "$n" ] ; then not_passed $LINENO ; exit 0 ; fi

n=0; n=$(grep -c -i "Termination status: 0" "cli31.log")
if [ 1 == "$n" ] ; then echo Passed ; exit 0 ; fi
not_passed $LINENO
exit -1
