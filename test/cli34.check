#!/bin/bash

function not_passed() {
  echo "NOT Passed: check condition leading to line '$1' of '$0'"
  exit -1
}

if [ ! -f cli34.log ] ; then not_passed $LINENO ; fi

n=0; n=$(grep -c -i " SCF Energy" cli34.log)
if [ 3 != "$n" ] ; then not_passed $LINENO ; exit 0 ; fi

n=0; n=$(grep -c -i " JOBOUTPUTDATA, 0, FINALSCFENERGY" cli34.log)
if [ 3 != "$n" ] ; then not_passed $LINENO ; exit 0 ; fi

if [ ! -f cli34_collector.sdf ] ; then not_passed $LINENO ; fi

n=0; n=$(grep -c -i "\-16\.81530436" cli34_collector.sdf)
if [ 1 != "$n" ] ; then not_passed $LINENO ; exit 0 ; fi

n=0; n=$(grep -c -i "\-16\.815274091" cli34_collector.sdf)
if [ 1 != "$n" ] ; then not_passed $LINENO ; exit 0 ; fi

n=0; n=$(grep -c -i "\-16\.803716152" cli34_collector.sdf)
if [ 1 != "$n" ] ; then not_passed $LINENO ; exit 0 ; fi

n=0; n=$(grep -c -i "\-16\.8100509844" cli34_collector.sdf)
if [ 1 != "$n" ] ; then not_passed $LINENO ; exit 0 ; fi

n=0; n=$(grep -c -i "Termination status: 0" cli34.log)
if [ 1 == "$n" ] ; then echo Passed ; exit 0 ; fi
not_passed $LINENO
exit -1
